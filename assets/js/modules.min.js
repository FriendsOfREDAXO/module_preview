$(document).on("rex:ready",function(){const e=document.querySelectorAll("input.module-image-input"),t=$("form.module-row"),o=$(".module-col .module").find("button.delete-image");for(let t=0;t<e.length;t++)e[t].onchange=(()=>{const[o]=e[t].files,n=document.getElementById("img-"+e[t].id);o&&(n.src=URL.createObjectURL(o))});o.on("click",function(e){e.preventDefault(),$("#rex-js-ajax-loader").addClass("rex-visible"),$.post(t.attr("action"),{delete_image:!0,image:$(this).data("image")}).done(function(){location.reload()}).fail(function(e){alert(e.responseText)}).always(function(){$("#rex-js-ajax-loader").removeClass("rex-visible")})})});
